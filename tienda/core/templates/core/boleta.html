{% extends "core/base.html" %}
{% load static %}
{% load custom_filters %}

{% block content %}
<div class="d-flex flex-column mt-4 text-nowrap flex-nowrap" style="height: 100%;">
  <!--TITLE-->
  <div class="d-flex flex-md-row flex-column justify-content-between align-items-center mb-5 mx-auto mt-3 w-75">
    <h1 class="mb-4 mb-md-0">Detalle de boleta 515</h1>
    <div class="d-flex justify-content-center" style="max-width: 800px;">
      <div class="d-flex flex-column w-100 mx-5 mt-md-0 mt-4 position-relative">
        {% if boleta.estado == 'Anulado' %}
          <h2 class="text-danger">ANULADA</h2>
        {% else %}
          <div class="progress" style="height: 5px;">
            <div class="progress-bar 
            {% if boleta.estado == 'Vendido' %}
              w-0
            {% elif boleta.estado == 'Despachado' %}
              w-50
            {% else %}
              w-100
            {% endif %}
            " 
            role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"
            ></div>
          </div>
          <button type="button" class="position-absolute top-0 start-0 translate-middle btn btn-sm btn-primary rounded-pill" style="width: 2rem; height:2rem;">1</button>
          <button type="button" class="position-absolute top-0 start-50 translate-middle btn btn-sm btn-primary rounded-pill" style="width: 2rem; height:2rem;">2</button>
          <button type="button" class="position-absolute top-0 start-100 translate-middle btn btn-sm btn-primary rounded-pill" style="width: 2rem; height:2rem;">3</button>
          <div class="d-flex flex-row flex-nowrap justify-content-between mt-4">
            <div class="fw-bold me-3">Vendido</div>
            <div class="fw-bold me-3">Despachado</div>
            <div class="fw-bold">Entregado</div>
          </div>
        {% endif %}
      </div>
    </div>
  </div>
  <!--TITLE-->
  <div class="w-75 overflow-auto mx-auto">
    <!--MAIN TABLE-->
    <table class="table table-striped table-hover">
      <thead>
        <tr>
          <th scope="col">Categor√≠a</th>
          <th scope="col">Producto</th>
          <th scope="col">Precio</th>
          <th scope="col">% Subscriptor</th>
          <th scope="col">% Oferta</th>
          <th scope="col">% Desc. Total</th>
          <th scope="col">Descuentos</th>
          <th scope="col">Precio a pagar</th>
        </tr>
      </thead>
      <tbody>
        {% for item in items %}
        <tr>
          <td>{{item.bodega.producto.categoria.nombre}}</td>
          <td>{{item.bodega.producto.nombre}}</td>
          <td>{{item.precio|formatear_dinero}}</td>
          <td>{{item.descuento_subscriptor|formatear_porcentaje}}</td>
          <td>{{item.descuento_oferta|formatear_porcentaje}}</td>
          <td>{{item.descuento_total|formatear_porcentaje}}</td>
          <td>{{item.descuentos|formatear_dinero}}</td>
          <td>{{item.precio_a_pagar|formatear_dinero}}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
    <!--MAIN TABLE-->
  </div>
  <div class="w-75 mx-auto mt-3">
    <!--SUMMARY-->
    <table class="w-25 ms-auto table custom-table table-borderless">
      <tr>
        <td>
          <div class="col fw-bold">
            Precio sin IVA
          </div>
        </td>
        <td>
          <div class="col border border-2 border-dark text-end ms-2 ps-5 pe-1">
            {{boleta.monto_sin_iva|formatear_dinero}}
          </div>
        </td>
      </tr>
      <tr>
        <td>
          <div class="col fw-bold">
            Valor del IVA (19%)
          </div>
        </td>
        <td>
          <div class="col border border-2 border-dark text-end ms-2 pe-1">
            {{boleta.iva|formatear_dinero}}
          </div>
        </td>
      </tr>
      <tr>
        <td>
          <div class="col fw-bold">
            Total a pagar
          </div>
        </td>
        <td>
          <div class="col border border-2 border-dark text-end ms-2 pe-1">
            {{boleta.total_a_pagar|formatear_dinero}}
          </div>
        </td>
      </tr>
    </table>
    <!--SUMMARY-->
  </div>
</div>  
{% endblock content %}